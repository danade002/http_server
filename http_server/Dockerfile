#--------------------------------------------------------------------------------------------------
# Pull alpine image from docker hub
#--------------------------------------------------------------------------------------------------
FROM ruby:2.4.0-alpine
#--------------------------------------------------------------------------------------------------
# Update apk packages and then install a few additional requirements for Rails
#--------------------------------------------------------------------------------------------------
RUN apk update  -qq && apk add nodejs build-base libxml2-dev libxslt-dev postgresql postgresql-dev
#--------------------------------------------------------------------------------------------------
# Creating a directory /app inside the container
#--------------------------------------------------------------------------------------------------
RUN mkdir /app
#--------------------------------------------------------------------------------------------------
# Specifying the working directory to be /app that was created
#--------------------------------------------------------------------------------------------------
WORKDIR /app
#--------------------------------------------------------------------------------------------------
# Copying all the files from the project's root to /app
#--------------------------------------------------------------------------------------------------
COPY . .
#--------------------------------------------------------------------------------------------------
# Shell command to expose port and run the code 
#--------------------------------------------------------------------------------------------------
EXPOSE 80
ENTRYPOINT ["ruby","http_server.rb"]



